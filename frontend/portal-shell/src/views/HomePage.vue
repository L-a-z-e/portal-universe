<script setup lang="ts">
import { Button, Badge } from '@portal/design-vue';
import { useRouter } from 'vue-router';
import { useAuthStore } from '../store/auth';
import DashboardPage from './DashboardPage.vue';

const router = useRouter();
const authStore = useAuthStore();

const services = [
  {
    id: 1,
    title: 'Blog',
    desc: 'ìƒê°ì„ ê¸°ë¡í•˜ê³  ê³µìœ í•˜ì„¸ìš”',
    icon: 'âœï¸',
    link: '/blog',
    gradient: 'from-brand-primary to-brand-primaryHover'
  },
  {
    id: 2,
    title: 'Shopping',
    desc: 'ì›í•˜ëŠ” ìƒí’ˆì„ ì°¾ì•„ë³´ì„¸ìš”',
    icon: 'ğŸ›’',
    link: '/shopping',
    gradient: 'from-status-info to-status-info'
  },
  {
    id: 3,
    title: 'Notes',
    desc: 'ë©”ëª¨ì™€ ì•„ì´ë””ì–´ë¥¼ ì •ë¦¬í•˜ì„¸ìš”',
    icon: 'ğŸ“',
    link: '#',
    gradient: 'from-brand-primary to-status-info'
  },
  {
    id: 4,
    title: 'Gallery',
    desc: 'ì†Œì¤‘í•œ ìˆœê°„ì„ ì €ì¥í•˜ì„¸ìš”',
    icon: 'ğŸ“¸',
    link: '#',
    gradient: 'from-status-info to-brand-primary'
  }
];

const features = [
  {
    id: 1,
    title: 'í†µí•© ì¸ì¦',
    desc: 'í•˜ë‚˜ì˜ ê³„ì •ìœ¼ë¡œ ëª¨ë“  ì„œë¹„ìŠ¤ ì´ìš©',
    icon: 'ğŸ”'
  },
  {
    id: 2,
    title: 'ì‹¤ì‹œê°„ ë™ê¸°í™”',
    desc: 'ëª¨ë“  ë””ë°”ì´ìŠ¤ì—ì„œ ì¦‰ì‹œ ë™ê¸°í™”',
    icon: 'ğŸ”„'
  },
  {
    id: 3,
    title: 'ì•ˆì „í•œ ì €ì¥',
    desc: 'ì—”ë“œíˆ¬ì—”ë“œ ì•”í˜¸í™”ë¡œ ë°ì´í„° ë³´í˜¸',
    icon: 'ğŸ›¡ï¸'
  }
];

const posts = [
  {
    id: 1,
    title: 'Vue 3 Composition API ì™„ë²½ ê°€ì´ë“œ',
    excerpt: 'Vue 3ì˜ í•µì‹¬ ê¸°ëŠ¥ì¸ Composition APIë¥¼ ì‹¤ì „ ì˜ˆì œì™€ í•¨ê»˜ ìì„¸íˆ ì•Œì•„ë´…ë‹ˆë‹¤...',
    date: '2025-10-20',
    readTime: '5ë¶„',
    tags: ['Vue', 'Frontend'],
    gradient: 'from-brand-primary to-brand-primaryHover'
  },
  {
    id: 2,
    title: 'Design System êµ¬ì¶•í•˜ê¸°',
    excerpt: 'í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰¬ìš´ ë””ìì¸ ì‹œìŠ¤í…œì„ ë§Œë“œëŠ” ë°©ë²•ì„ ë‹¨ê³„ë³„ë¡œ...',
    date: '2025-10-18',
    readTime: '8ë¶„',
    tags: ['Design', 'UI/UX'],
    gradient: 'from-status-info to-status-info'
  },
  {
    id: 3,
    title: 'Micro Frontend ì•„í‚¤í…ì²˜',
    excerpt: 'Module Federationì„ í™œìš©í•œ ë§ˆì´í¬ë¡œ í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¶• ì‹¤ì „ ê°€ì´ë“œ...',
    date: '2025-10-15',
    readTime: '12ë¶„',
    tags: ['Architecture'],
    gradient: 'from-brand-primary to-status-info'
  }
];

function handleStartClick() {
  if (authStore.isAuthenticated) {
    router.push('/blog');
  } else {
    authStore.requestLogin();
  }
}
</script>

<template>
  <!-- Show Dashboard for authenticated users -->
  <DashboardPage v-if="authStore.isAuthenticated" />

  <!-- Marketing page for guests -->
  <div v-else class="bg-bg-page text-text-body">

    <!-- Hero Section - Linear style dark gradient -->
    <section class="relative overflow-hidden bg-gradient-to-b from-bg-page via-bg-card to-bg-page">
      <!-- Grid pattern overlay -->
      <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1vcGFjaXR5PSIwLjAzIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-50"></div>
      <!-- Glow effect -->
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-brand-primary/10 rounded-full blur-[120px]"></div>

      <div class="relative max-w-7xl mx-auto px-4 py-24 md:py-32">
        <div class="max-w-3xl">
          <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-brand-primary/10 border border-brand-primary/20 mb-8">
            <span class="w-1.5 h-1.5 bg-brand-primary rounded-full animate-pulse"></span>
            <span class="text-sm text-brand-primary font-medium">Now with Linear-style dark mode</span>
          </div>

          <h1 class="text-5xl md:text-6xl font-bold text-text-heading mb-6 leading-tight">
            Your Digital
            <span class="block bg-gradient-to-r from-brand-primary to-brand-primaryHover bg-clip-text text-transparent">
              Universe
            </span>
          </h1>

          <p class="text-lg text-text-body mb-10 leading-relaxed">
            ëª¨ë“  ê²ƒì´ ì—°ê²°ëœ ë‹¹ì‹ ë§Œì˜ ê³µê°„.
            <span class="text-text-heading font-medium">ë¸”ë¡œê·¸, ì‡¼í•‘, ë©”ëª¨</span> ë“±
            ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ë¥¼ í•˜ë‚˜ì˜ í¬í„¸ì—ì„œ ê²½í—˜í•˜ì„¸ìš”.
          </p>

          <div class="flex flex-wrap gap-3">
            <Button variant="primary" size="lg" @click="handleStartClick">
              {{ authStore.isAuthenticated ? 'ë¸”ë¡œê·¸ ì‹œì‘í•˜ê¸°' : 'ì‹œì‘í•˜ê¸°' }} â†’
            </Button>

            <Button variant="secondary" size="lg">
              ë¼ì´ë¸Œ ë°ëª¨
            </Button>
          </div>
        </div>
      </div>
    </section>

    <!-- Services - Linear style cards -->
    <section class="max-w-7xl mx-auto px-4 py-16">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <div
            v-for="service in services"
            :key="service.id"
            @click="() => service.link !== '#' && router.push(service.link)"
            class="group relative overflow-hidden rounded-xl p-6 bg-bg-card border border-border-default hover:border-brand-primary/50 transition-all duration-normal cursor-pointer"
        >
          <div class="relative z-10">
            <div class="text-4xl mb-4">{{ service.icon }}</div>
            <h3 class="text-lg font-semibold text-text-heading mb-1">{{ service.title }}</h3>
            <p class="text-text-meta text-sm">{{ service.desc }}</p>
          </div>
          <div class="absolute inset-0 bg-brand-primary/5 opacity-0 group-hover:opacity-100 transition-opacity"></div>
        </div>
      </div>
    </section>

    <!-- Features - Linear style -->
    <section class="max-w-7xl mx-auto px-4 py-20">
      <div class="text-center mb-12">
        <div class="inline-block px-3 py-1 rounded-full bg-brand-primary/10 text-brand-primary font-medium text-sm mb-4">
          WHY PORTAL UNIVERSE
        </div>
        <h2 class="text-3xl md:text-4xl font-bold text-text-heading mb-4">
          ëª¨ë“  ê²ƒì´ ì—°ê²°ë©ë‹ˆë‹¤
        </h2>
        <p class="text-lg text-text-meta max-w-2xl mx-auto">
          ê°•ë ¥í•œ í†µí•© ê¸°ëŠ¥ìœ¼ë¡œ ë” íš¨ìœ¨ì ì¸ ë””ì§€í„¸ ë¼ì´í”„ë¥¼ ê²½í—˜í•˜ì„¸ìš”
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div
            v-for="feature in features"
            :key="feature.id"
            class="group p-6 rounded-xl bg-bg-card border border-border-default hover:border-brand-primary/30 transition-all duration-normal"
        >
          <div class="text-3xl mb-4">{{ feature.icon }}</div>
          <h3 class="text-lg font-semibold text-text-heading mb-2">{{ feature.title }}</h3>
          <p class="text-text-meta text-sm">{{ feature.desc }}</p>
        </div>
      </div>
    </section>

    <!-- Recent Posts - Linear style -->
    <section class="max-w-7xl mx-auto px-4 py-20">
      <div class="flex items-end justify-between mb-8">
        <div>
          <div class="inline-block px-3 py-1 rounded-full bg-brand-primary/10 text-brand-primary font-medium text-sm mb-4">
            LATEST UPDATES
          </div>
          <h2 class="text-3xl font-bold text-text-heading">ìµœê·¼ ì—…ë°ì´íŠ¸</h2>
        </div>
        <Button variant="secondary" @click="router.push('/blog')">
          ì „ì²´ ë³´ê¸° â†’
        </Button>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <article
            v-for="post in posts"
            :key="post.id"
            class="group bg-bg-card rounded-xl overflow-hidden border border-border-default hover:border-brand-primary/30 transition-all duration-normal cursor-pointer"
        >
          <div class="h-40 bg-gradient-to-br from-bg-elevated to-bg-card flex items-center justify-center text-5xl">
            ğŸ“„
          </div>

          <div class="p-5">
            <div class="flex items-center gap-2 mb-3">
              <Badge
                  v-for="tag in post.tags"
                  :key="tag"
                  variant="primary"
                  size="sm"
              >
                {{ tag }}
              </Badge>
            </div>

            <h3 class="text-base font-semibold text-text-heading mb-2 group-hover:text-brand-primary transition-colors">
              {{ post.title }}
            </h3>

            <p class="text-text-meta text-sm mb-4 line-clamp-2">
              {{ post.excerpt }}
            </p>

            <div class="flex items-center justify-between text-xs text-text-meta">
              <span>{{ post.date }}</span>
              <span>{{ post.readTime }} ì½ê¸°</span>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- CTA Section - Linear style gradient -->
    <section class="relative overflow-hidden py-20">
      <div class="absolute inset-0 bg-gradient-to-r from-brand-primary to-brand-primaryHover"></div>
      <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1vcGFjaXR5PSIwLjEiIHN0cm9rZS13aWR0aD0iMSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmlkKSIvPjwvc3ZnPg==')] opacity-30"></div>
      <div class="relative max-w-4xl mx-auto px-4 text-center">
        <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
          ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•˜ì„¸ìš”
        </h2>
        <p class="text-lg text-white/80 mb-8">
          ë¬´ë£Œë¡œ ì‹œì‘í•˜ê³ , ì–¸ì œë“ ì§€ ì—…ê·¸ë ˆì´ë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
        </p>
        <div class="flex flex-wrap gap-3 justify-center">
          <Button variant="secondary" size="lg" @click="handleStartClick">
            {{ authStore.isAuthenticated ? 'ë¸”ë¡œê·¸ ì‹œì‘í•˜ê¸°' : 'ë¬´ë£Œë¡œ ì‹œì‘í•˜ê¸°' }}
          </Button>
          <Button variant="ghost" size="lg" class="text-white border border-white/20 hover:bg-white/20">
            ê°€ê²© ë³´ê¸°
          </Button>
        </div>
      </div>
    </section>

  </div>
</template>